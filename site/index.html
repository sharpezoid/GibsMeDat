<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gibs Me Dat - $GIBS</title>
  <link rel="stylesheet" href="styles.css" />
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/javascript">
    const { useState, useEffect } = React;
    const tokenAddress = "0x0000000000000000000000000000000000000000";
    const tokenAbi = [
      "function totalSupply() view returns (uint256)",
      "function symbol() view returns (string)",
    ];

    function App() {
      const [supply, setSupply] = useState("6,942,080,085");
      const [gulaged, setGulaged] = useState("0");
      const [connected, setConnected] = useState(false);

      async function loadSupply() {
        try {
          if (!window.ethereum) return;
          const provider = new ethers.BrowserProvider(window.ethereum);
          const contract = new ethers.Contract(tokenAddress, tokenAbi, provider);
          const total = await contract.totalSupply();
          setSupply(ethers.formatUnits(total, 18));
        } catch (err) {
          console.error(err);
        }
      }

      async function connect() {
        if (!window.ethereum) return;
        await window.ethereum.request({ method: 'eth_requestAccounts' });
        setConnected(true);
        loadSupply();
      }

      useEffect(() => {
        if (connected) {
          loadSupply();
        }
      }, [connected]);

      return (
        React.createElement('main', { className: 'container' },
          React.createElement('h1', { className: 'title' }, 'Gibs Me Dat'),
          React.createElement('h2', { className: 'subtitle' }, '$GIBS â€“ From each according to their bags, to each according to their memes.'),
          React.createElement('ul', { className: 'stats' },
            React.createElement('li', null, `Total Supply: ${supply}`),
            React.createElement('li', null, `Total Gulaged: ${gulaged}`),
            React.createElement('li', null, 'Transfer Tax: 6.9% (3% reflection, 3% treasury, 0.9% burn)')
          ),
          React.createElement('button', { onClick: connect, className: 'connect' }, connected ? 'Wallet Connected' : 'Connect Wallet'),
          React.createElement('p', { className: 'footer' }, 'Stake in the Proletariat Vault, help craft the on-chain Meme Manifesto, and direct the Gibs Treasury DAO. This page is ready for deployment on ', React.createElement('strong', null, 'Fleek'), '.')
        )
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>
